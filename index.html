<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Ricsiboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	
	<link rel="icon" type="image/png" href="res/favicon.ico"/>

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
	  
	  
	  /* The Overlay (background) */
.overlay {
  /* Height & width depends on how you want to reveal the overlay (see JS below) */   
  height: 100%;
  width: 0;
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  background-color: rgb(0,0,0); /* Black fallback color */
  background-color: rgba(0,0,0, 0.9); /* Black w/opacity */
  overflow-x: hidden; /* Disable horizontal scroll */
  transition: 0.5s; /* 0.5 second transition effect to slide in or slide down the overlay (height or width, depending on reveal) */
}

/* Position the content inside the overlay */
.overlay-content {
  position: relative;
  top: 25%; /* 25% from the top */
  width: 100%; /* 100% width */
  text-align: center; /* Centered text/links */
  margin-top: 30px; /* 30px top margin to avoid conflict with the close button on smaller screens */
}

/* The navigation links inside the overlay */
.overlay a {
  padding: 8px;
  text-decoration: none;
  font-size: 36px;
  color: #818181;
  display: block; /* Display block instead of inline */
  transition: 0.3s; /* Transition effects on hover (color) */
}

/* When you mouse over the navigation links, change their color */
.overlay a:hover, .overlay a:focus {
  color: #f1f1f1;
}

/* Position the close button (top right corner) */
.overlay .closebtn {
  position: absolute;
  top: 20px;
  right: 45px;
  font-size: 60px;
}

/* When the height of the screen is less than 450 pixels, change the font-size of the links and position the close button again, so they don't overlap */
@media screen and (max-height: 450px) {
  .overlay a {font-size: 20px}
  .overlay .closebtn {
    font-size: 40px;
    top: 15px;
    right: 35px;
  }
}
















@import url("https://fonts.googleapis.com/css?family=Raleway:300,800");
body {
  background-color: #53a8e6;
}
body h1 {
  text-align: center;
  font-family: "Raleway", sans-serif;
  color: white;
  font-size: 50px;
  font-weight: normal;
}
body .list {
  position: relative;
  width: 250px;
  margin: 0px auto;
  display: block;
}
body .list ::-webkit-input-placeholder {
  color: #cecece;
}
body .list .input {
  outline: none;
  border: 1px solid white;
  background-color: #53a8e6;
  color: white;
  height: 50px;
  width: 250px;
  padding-left: 10px;
  font-family: "Raleway", sans-serif;
  font-weight: 800;
  font-size: 16px;
  margin-left: -5px;
}
body .list span {
  position: absolute;
  right: 0;
  top: 0;
  font-size: 30px;
  font-weight: 800;
  line-height: 1.8;
  cursor: pointer;
  transition: all 200ms;
  color: white;
  will-change: transform;
}
body .list span:hover {
  transform: rotate(180deg);
}
body ul {
  padding: 0px;
}
body ul .draggable {
  will-change: transform;
  font-family: "Raleway", sans-serif;
  font-weight: 800;
  height: 50px;
  list-style-type: none;
  margin: 10px;
  background-color: white;
  color: #212121;
  width: 250px;
  line-height: 3.2;
  padding-left: 10px;
  cursor: move;
  transition: all 200ms;
  user-select: none;
  margin: 10px auto;
  position: relative;
}
body ul .draggable:after {
  content: 'drag me';
  right: 7px;
  font-size: 10px;
  position: absolute;
  cursor: pointer;
  line-height: 5;
  transition: all 200ms;
  transition-timing-function: cubic-bezier(0.48, 0.72, 0.62, 1.5);
  transform: translateX(120%);
  opacity: 0;
}
body ul .draggable:hover:after {
  opacity: 1;
  transform: translate(0);
}
 
.over {
  transform: scale(1.1, 1.1);
}
	  
    </style>
	  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
	  <script src="http://code.jquery.com/jquery-3.6.0.js"></script>
	
		<script type = "text/javascript">
			function chartOf(fullTicker, containerId) {
				new TradingView.MediumWidget(
				  {
				  "symbols": [
					[
					  fullTicker
					]
				  ],
				  "chartOnly": false,
				  "width": "100%",
				  "height": "400",
				  "locale": "en",
				  "colorTheme": "light",
				  "gridLineColor": "rgba(240, 243, 250, 0)",
				  "fontColor": "#787B86",
				  "isTransparent": false,
				  "autosize": true,
				  "showFloatingTooltip": true,
				  "scalePosition": "right",
				  "scaleMode": "Normal",
				  "fontFamily": "Trebuchet MS, sans-serif",
				  "noTimeScale": false,
				  "chartType": "area",
				  "lineColor": "#2962FF",
				  "bottomColor": "rgba(41, 98, 255, 0)",
				  "topColor": "rgba(41, 98, 255, 0.3)",
				  "container_id": containerId
				}
			  );
			}
			
			function shareBoardLink() {
			  navigator.clipboard.writeText(window.location.href);
			  
			  alert("Saved the shareable URL in your clipboard - feel free to share it!");
			}
			
			/* Open when someone clicks on the span element */
function openNav() {
  document.getElementById("myNav").style.width = "100%";
}

/* Close when someone clicks on the "x" symbol inside the overlay */
function closeNav() {
  document.getElementById("myNav").style.width = "0%";
}

var btn = document.querySelector('.add');
var remove = document.querySelector('.draggable');
 
function dragStart(e) {
  this.style.opacity = '0.4';
  dragSrcEl = this;
  e.dataTransfer.effectAllowed = 'move';
  e.dataTransfer.setData('text/html', this.innerHTML);
};
 
function dragEnter(e) {
  this.classList.add('over');
}
 
function dragLeave(e) {
  e.stopPropagation();
  this.classList.remove('over');
}
 
function dragOver(e) {
  e.preventDefault();
  e.dataTransfer.dropEffect = 'move';
  return false;
}
 
function dragDrop(e) {
  if (dragSrcEl != this) {
    dragSrcEl.innerHTML = this.innerHTML;
    this.innerHTML = e.dataTransfer.getData('text/html');
  }
  return false;
}
 
function dragEnd(e) {
  var listItens = document.querySelectorAll('.draggable');
  [].forEach.call(listItens, function(item) {
    item.classList.remove('over');
  });
  this.style.opacity = '1';
}
 
function addEventsDragAndDrop(el) {
  el.addEventListener('dragstart', dragStart, false);
  el.addEventListener('dragenter', dragEnter, false);
  el.addEventListener('dragover', dragOver, false);
  el.addEventListener('dragleave', dragLeave, false);
  el.addEventListener('drop', dragDrop, false);
  el.addEventListener('dragend', dragEnd, false);
}
 
var listItens = document.querySelectorAll('.draggable');
[].forEach.call(listItens, function(item) {
  addEventsDragAndDrop(item);
});
 
function addNewItem() {
  var newItem = document.querySelector('.input').value;
  if (newItem != '') {
    document.querySelector('.input').value = '';
    var li = document.createElement('li');
    var attr = document.createAttribute('draggable');
    var ul = document.querySelector('ul');
    li.className = 'draggable';
    attr.value = 'true';
    li.setAttributeNode(attr);
    li.appendChild(document.createTextNode(newItem));
    ul.appendChild(li);
    addEventsDragAndDrop(li);
  }
}
 
btn.addEventListener('click', addNewItem);
	</script>
  </head>
  <body>
  
<div id="myNav" class="overlay">

  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>

  <div class="overlay-content">
    <a href="#">About</a>
    <a href="#">Services</a>
    <a href="#">Clients</a>
    <a href="#">Contact</a>
  <div class="list">
    <input type="text" class="input" placeholder="Add items in your list"/>
    <span class="add">+</span>
  </div>
  <ul>
    <li class="draggable" draggable="true">HTML</li>
    <li class="draggable" draggable="true">CSS</li>
    <li class="draggable" draggable="true">JavaScript</li>
    <li class="draggable" draggable="true">PHP</li>
    <li class="draggable" draggable="true">MySQL</li>
  </ul>
  </div>

</div>
  
	<header>
	  <div class="collapse bg-dark" id="navbarHeader">
		<div class="container">
		  <div class="row">
			<div class="col-sm-8 col-md-7 py-4">
			  <h4 class="text-white">Ricsiboard</h4>
			  <p class="text-muted">I have too much free time.</p>
			</div>
			<div class="col-sm-4 offset-md-1 py-4">
			  <h4 class="text-white">Contact</h4>
			  <ul class="list-unstyled">
				<li><a href="#" class="text-white">Twitter</a></li>
				<li><a href="#" class="text-white">Facebook</a></li>
				<li><a href="#" class="text-white">E-mail</a></li>
			  </ul>
			</div>
		  </div>
		</div>
	  </div>
	  
	  <div class="navbar navbar-dark bg-dark shadow-sm">
		<div class="container">
		  <a href="#" class="navbar-brand d-flex align-items-center">
			<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true" class="me-2" viewBox="0 0 24 24"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
			<strong>Ricsiboard</strong>
		  </a>
		  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarHeader" aria-controls="navbarHeader" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		  </button>
		</div>
	  </div>
	</header>

	<main>
	  <section class="py-1 text-center container">
		<div class="row py-lg-1">
		  <div class="col-lg-6 col-md-8 mx-auto">
			<h1 class="fw-light">Ricsiboard</h1>
			<p class="lead text-muted">Some random stuff below.</p>
			<p>
			  <a onclick="openNav()" class="btn btn-primary my-2">Edit dashboard</a>
			  <a class="btn btn-secondary my-2" onclick="shareBoardLink()">Share board link</a>
			</p>
		  </div>
		</div>
	  </section>

	  <div class="album py-1 bg-light">
		<div id="instrument-list" class="container">
		</div>
	  </div>
	  
	  <template id="chart-template">
			<div class="col">
			  <div class="card shadow-sm">
				<div class="tradingview-widget-container">
				  <div id="${view_id}"></div>
				  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/${ticker}" rel="noopener" target="_blank"><span class="blue-text">${ticker}</span></a></div>
				</div>
			  </div>
			</div>
	  </template>

	  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	  
	  <script>
		const urlSearchParams = new URLSearchParams(window.location.search);
		const params = Object.fromEntries(urlSearchParams.entries());
		var id = 1;
		for (let [key, values] of Object.entries(params)) {
			console.log(key, values);
			var header = document.createElement("h1");
			header.innerHTML = key;
			$("#instrument-list").append(header);
			
			var list = document.createElement("div");
			list.classList.add("row", "row-cols-1", "row-cols-sm-2", "row-cols-md-3", "g-3");
			$("#instrument-list").append(list);

			var arr = values.split(",")
			for (i = 0; i < arr.length; i++) {
				var viewId = "view" + id ;
				var fullTicker = arr[i];
				var templateHtml = $("#chart-template").html();
				var shortTicker = fullTicker.replaceAll(":", "-").substring(0, fullTicker.indexOf("|"));
				
				templateHtml = templateHtml.replaceAll("${view_id}", viewId);
				templateHtml = templateHtml.replaceAll("${ticker}", shortTicker);
				templateHtml = templateHtml.replaceAll("${ticker_full}", fullTicker);

				var div = document.createElement("div");
				div.innerHTML = templateHtml;

				list.append(div);
				chartOf(fullTicker, viewId)
				id = id + 1;
			}
		}
		</script>
	</main>

	<footer class="text-muted py-5">
	  <div class="container">
		<p class="float-end mb-1">
		  <a href="#">Back to top</a>
		</p>
		<p class="mb-1">Ricsiboard </p>
		<p class="mb-0">&copy; Bootstrap, but felt pleased download and customize it for myself! :-)</p>
	  </div>
	</footer>
  </body>
</html>
